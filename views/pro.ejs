<!--
 * @Descripttion: 
 * @version: 
 * @Author: lujj
 * @Date: 2020-08-04 21:49:29
 * @LastEditors: sueRimn
 * @LastEditTime: 2020-08-18 21:35:54
-->
<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>AdminLTE 2 | Starter</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <link rel="stylesheet" href="/bootstrap/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="/Ionicons/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="/dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
        page. However, you can choose any other skin. Make sure you
        apply the skin class to the body tag so the changes take effect. -->
  <link rel="stylesheet" href="/dist/css/skins/skin-blue.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Font -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
</head>
<!--
BODY TAG OPTIONS:
=================
Apply one or more of the following classes to get the
desired effect
|---------------------------------------------------------|
| SKINS         | skin-blue                               |
|               | skin-black                              |
|               | skin-purple                             |
|               | skin-yellow                             |
|               | skin-red                                |
|               | skin-green                              |
|---------------------------------------------------------|
|LAYOUT OPTIONS | fixed                                   |
|               | layout-boxed                            |
|               | layout-top-nav                          |
|               | sidebar-collapse                        |
|               | sidebar-mini                            |
|---------------------------------------------------------|
-->

<body class="hold-transition skin-blue sidebar-mini">
  <div class="wrapper">
    <%- include('./header.ejs') %>
    <%- include('./menu.ejs') %>



    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <section class="content-header">
        <h1>
          商品管理
          <!-- Page Header
        <small>Optional description</small> -->
        </h1>
        <ol class="breadcrumb">
          <li><a href="#"><i class="fa fa-dashboard"></i> Level</a></li>
          <li class="active">Here</li>
        </ol>
      </section>

      <!-- Main content -->
      <section class="content container-fluid">

        <div class="box">
          <div class="box-header">
            <h3 class="box-title">
              <a href="/pro/add"><button class="btn btn-md btn-primary">添加商品</button></a>
              <a href="/pro/upload"><button class="btn btn-md btn-primary">导入商品</button></a>
            </h3>

            <div class="box-tools">
              <div class="input-group input-group-sm" style="width: 150px;">
                <input type="text" name="table_search" id="searchText" onchange="searchPro()" class="form-control pull-right" placeholder="Search">

                <div class="input-group-btn">
                  <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                </div>
              </div>
            </div>
          </div>
          <!-- /.box-header -->
          <div class="box-body table-responsive no-padding">
            <table class="table table-hover">
              <tbody>
                <tr>
                  <th class="col-xs-1">序号</th>
                  <th class="col-xs-1">商品图片</th>
                  <th class="col-xs-1">商品名称</th>

                  <th class="col-xs-1">商品价格
                    <a href="/pro/sort?type=price&num=1">↑</a>
                    <a href="/pro/sort?type=price&num=-1">↓</a>
                  </th>
                  <th class="col-xs-1">分类</th>
                  <th class="col-xs-1">品牌</th>
                  <th class="col-xs-1">
                    销量
                    <a href="/pro/sort?type=sales&num=1">↑</a>
                    <a href="/pro/sort?type=sales&num=-1">↓</a>
                  </th>
                  <th class="col-xs-1">库存
                    <a href="/pro/sort?type=stock&num=1">↑</a>
                    <a href="/pro/sort?type=stock&num=-1">↓</a>
                  </th>
                  <th class="col-xs-1">折扣</th>
                  <th class="col-xs-1">评分</th>
                  <th class="col-xs-1">操作</th>
                </tr>
                <% for(var i=0;i<data.length;i++){ %>
                <tr>
                  <td><%= limit*(count-1)+i+1 %></td>
                  <td>
                    <img src="<%= data[i].proimg %>" alt="" style="width: 90px;height: 90px;">
                  </td>
                  <td><%= data[i].proname %></td>
                  <td><%= data[i].price%></td>
                  <td><%= data[i].category %></td>
                  <td><%= data[i].brand %></td>
                  <td><%= data[i].sales %></td>
                  <td><%= data[i].stock %></td>
                  <td><%= data[i].discount %></td>
                  <td><%= data[i].rating %></td>

                  <td>
                    <button class="btn btn-md btn-default" onclick="showOP(this)">
                      <i class="fa fa-cog"></i>
                    </button>
                    <div class="op" style="display:none">
                      <a href="/pro/update?proid=<%- data[i].proid %>">
                          <button class="btn btn-md btn-warning">
                            <i class="fa fa-edit"></i>
                          </button>
                      </a>
                    <a href="/pro/delete?proid=<%- data[i].proid %>">
                      <button class="btn btn-md btn-danger">
                        <i class="fa fa-trash"></i>
                      </button>
                    </a>
                  </div>
                    
                  </td>
                </tr>

                <% } %>


              </tbody>
            </table>
          </div>
          <!-- /.box-body -->
          <div class="box-footer clearfix">
            <ul class="pagination pagination-sm no-margin pull-right">
              <li><a href="/pro?count=<%= count>1? (count-1) : 1 %>">«</a></li>
              <% for(var i=0;i<totalCount;i++){%>
                <li class="<%= count===(i+1)?'active' : ''%>">
                  <a href="/pro?count=<%= i+1 %>">
                    <%= i+1 %>
                  </a>
                </li>
              <% } %>
              <li><a href="/pro?count=<%= count<totalCount? (count+1) : totalCount %>">»</a></li>
            </ul>
          </div>
        </div>

      </section>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <!-- Main Footer -->

    <%- include('./footer.ejs') %>
    <%- include('./siderbar.ejs') %>

    <!-- /.control-sidebar -->
    <!-- Add the sidebar's background. This div must be placed
  immediately after the control sidebar -->
    <div class="control-sidebar-bg"></div>
  </div>
  <!-- ./wrapper -->

  <!-- REQUIRED JS SCRIPTS -->

  <!-- jQuery 3 -->
  <script src="/jquery/dist/jquery.min.js"></script>
  <!-- Bootstrap 3.3.7 -->
  <script src="/bootstrap/dist/js/bootstrap.min.js"></script>
  <!-- AdminLTE App -->
  <script src="/dist/js/adminlte.min.js"></script>

  <!-- Optionally, you can add Slimscroll and FastClick plugins.
     Both of these plugins are recommended to enhance the
     user experience. -->
</body>
<script>
  function showOP(that){
    $('.op').css('display','none')
    $(that).next('.op').toggle(100)
  }
  function searchPro(){
    var searchText=$('#searchText').val()
    window.location.href="/pro/search?searchText="+searchText
  }
</script>

</html>